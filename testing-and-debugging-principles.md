# 测试与调试原则

## 核心原则
当测试功能遇到报错时，必须以完成功能需求为目标进行修复，绝对不能为了通过测试而采取删除测试用例、删除问题代码等回避问题的方式。

## 禁止的错误做法

### 严格禁止以下行为：
1. **删除测试用例**：即使测试反复失败，也不能删除测试用例来"解决"问题
2. **删除或注释问题代码**：不能通过移除功能代码来通过编译或测试
3. **降低测试标准**：不能修改测试断言使其更容易通过但不符合实际需求
4. **跳过测试**：不能使用 skip、ignore 等方式跳过失败的测试
5. **修改功能需求**：不能为了让代码通过测试而擅自修改原有的功能需求

## 正确的处理方式

### 1. 理解功能需求
- 首先明确该功能的目的是什么
- 理解项目的整体功能需求
- 确认测试用例是否正确反映了功能需求

### 2. 分析问题根源
- 仔细阅读错误信息和堆栈跟踪
- 理解为什么会出现这个错误
- 检查是否是配置问题、依赖问题还是逻辑问题
- 确定问题是在测试代码中还是在功能代码中

### 3. 基于需求修复问题
- 修复应该以实现功能需求为目标
- 确保修复后的代码符合设计文档和需求文档
- 保持代码的完整性和功能的完整性

### 4. 验证修复效果
- 确认修复后测试通过
- 验证功能是否按预期工作
- 检查是否引入了新的问题

## 遇到困难时的处理流程

### 当反复尝试仍无法修复时：

1. **停止盲目尝试**
   - 不要继续进行无效的修复尝试
   - 避免陷入"试错循环"

2. **整理问题信息**
   - 记录已经尝试过的修复方法
   - 整理错误信息和相关日志
   - 明确当前的问题状态

3. **寻求用户协助**
   - 主动向用户说明当前遇到的问题
   - 提供详细的错误信息和上下文
   - 请求用户参与排查问题

## 示例场景

### ❌ 错误做法
```
测试失败 → 删除测试用例 → 测试通过 ✓（但功能未实现）
编译错误 → 注释问题代码 → 编译通过 ✓（但功能缺失）
```

### ✅ 正确做法
```
测试失败 → 分析需求 → 理解错误原因 → 修复功能代码 → 测试通过 ✓
编译错误 → 检查依赖和配置 → 修复代码问题 → 编译通过 ✓
反复失败 → 整理问题信息 → 寻求用户协助 → 共同解决 ✓
```

## 重要提醒

- **功能完整性优先**：始终以实现完整的功能需求为目标
- **测试是验证工具**：测试用例是用来验证功能是否正确实现的，不是障碍
- **问题必须解决**：遇到问题要真正解决，而不是回避
- **及时求助**：当自己无法解决时，及时寻求用户帮助是正确的选择

## 适用范围
- 单元测试失败
- 集成测试失败
- 编译错误
- 运行时错误
- 类型检查错误
- 任何阻碍功能实现的技术问题
