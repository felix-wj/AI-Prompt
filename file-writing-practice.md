# 文件写入最佳实践

## 核心原则
在写入文件时，应该采用分段追加写入的方式，避免大文本一次性写入导致出错中断任务。

## 实施规范

### 1. 文件创建策略
- 使用 `fsWrite` 创建文件时，只写入文件的初始部分（建议不超过 50 行）
- 对于较大的文件内容，将其分解为多个逻辑段落

### 2. 内容追加策略
- 创建文件后，使用 `fsAppend` 工具逐段追加剩余内容
- 每次追加应该是一个完整的逻辑单元（如一个函数、一个类、一个章节等）
- 追加操作应该按照代码或文档的逻辑顺序进行

### 3. 适用场景
- 创建新的代码文件
- 生成文档文件（如 requirements.md、design.md、tasks.md）
- 编写配置文件
- 任何预期内容超过 50 行的文件

### 4. 优势
- 提高写入操作的可靠性
- 减少因单次操作失败导致的任务中断
- 便于追踪和调试文件写入过程
- 提升整体执行效率

## 示例流程

```
1. fsWrite: 创建文件并写入头部内容（如导入语句、类定义开始）
2. fsAppend: 追加第一个方法或章节
3. fsAppend: 追加第二个方法或章节
4. fsAppend: 追加剩余内容和结尾部分
```

## 注意事项
- 确保每次追加的内容在语法上是完整的
- 注意代码缩进和格式的一致性
- 对于 Markdown 文档，确保标题层级和结构清晰
